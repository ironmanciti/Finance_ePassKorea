# ---
# jupyter:
#   jupytext:
#     formats: ipynb,py:percent
#     text_representation:
#       extension: .py
#       format_name: percent
#       format_version: '1.3'
#       jupytext_version: 1.17.3
#   kernelspec:
#     display_name: Python 3 (ipykernel)
#     language: python
#     name: python3
# ---

# %% [markdown] id="lFXS6zPCUK0U"
# # 02차시: Python 기초 문법
#
# ## 학습 목표
# - 데이터 분석에 필수적인 Python 기본 문법 학습
# - 변수, 자료형, 리스트, 딕셔너리, 반복문, 조건문, 함수 이해
#
# ## 학습 내용
# 1. 변수와 자료형
# 2. 리스트 (List)
# 3. 딕셔너리 (Dictionary)
# 4. 조건문 (if, elif, else)
# 5. 반복문 (for)
# 6. 함수 (def)
#
# ## 구분
# 이론/실습
#
# ---
# 모든 예제는 금융 데이터 분석에 활용할 수 있는 실용적인 예제로 구성됩니다.
#

# %% [markdown] id="Ed6fKTadUK0V"
# ## 1. 변수와 자료형
#
# ### 변수란?
# - 데이터를 저장하는 공간
# - `변수명 = 값` 형태로 사용
#
# ### 주요 자료형
# | 자료형 | 설명 | 예시 |
# |--------|------|------|
# | `int` | 정수 | `42`, `-10` |
# | `float` | 실수 | `3.14`, `125000.5` |
# | `str` | 문자열 | `"삼성전자"`, `'005930'` |
# | `bool` | 불리언 | `True`, `False` |
#
# ### 타입 확인
# `type()` 함수로 변수의 자료형을 확인할 수 있습니다.
#

# %% colab={"base_uri": "https://localhost:8080/"} id="cPfieKp3UK0W" outputId="3c094437-ed1f-4912-bcf9-c0e85f4fd4ac"
# 금융 데이터에서 자주 사용하는 변수 예제

# 종목 정보
종목명 = "삼성전자"
종목코드 = "005930"
현재가 = 75000  # int (정수)
전일대비 = 1500.5  # float (실수)
상승여부 = True  # bool (불리언)

print("[종목 정보]")
print(f"종목명: {종목명} (타입: {type(종목명).__name__})")
print(f"종목코드: {종목코드} (타입: {type(종목코드).__name__})")
print(f"현재가: {현재가:,}원 (타입: {type(현재가).__name__})")
print(f"전일대비: {전일대비:+,.1f}원 (타입: {type(전일대비).__name__})")
print(f"상승여부: {상승여부} (타입: {type(상승여부).__name__})")

# 타입 변환 예제
print("\n[타입 변환 예제]")
문자열_가격 = "75000"
숫자_가격 = int(문자열_가격)
print(f"문자열 '{문자열_가격}' → 정수 {숫자_가격}")

# %% [markdown] id="35lYAxRVUK0X"
# ## 2. 리스트 (List)
#
# 여러 데이터를 순서대로 저장하는 자료구조
#
# ### 기본 사용법
# - `[ ]` 대괄호로 생성
# - 인덱스(0부터 시작)로 접근
# - `append()`로 추가, `len()`으로 길이 확인
#
# ### 금융 데이터에서의 활용
# - 여러 종목의 가격을 저장
# - 일별 주가 데이터 관리
#

# %% colab={"base_uri": "https://localhost:8080/"} id="R6dqvRlnUK0X" outputId="3099a1ae-7e10-4df6-dde0-f8ae1d8bdd09"
# 여러 종목의 주가를 리스트로 관리

# 종목별 현재가 리스트
종목가격 = [75000, 450000, 120000, 85000]
종목명리스트 = ["삼성전자", "NAVER", "카카오", "LG전자"]

print("[종목별 현재가]")
for i in range(len(종목명리스트)):
    print(f"{종목명리스트[i]}: {종목가격[i]:,}원")

# 리스트 조작
print("\n[리스트 조작 예제]")
종목가격.append(150000)  # 추가
print(f"추가 후: {종목가격}")

print(f"\n첫 번째 종목: {종목가격[0]:,}원")
print(f"마지막 종목: {종목가격[-1]:,}원")
print(f"처음 3개: {종목가격[:3]}")
print(f"리스트 길이: {len(종목가격)}개")

# 최고가, 최저가 찾기
print(f"\n[통계]")
print(f"최고가: {max(종목가격):,}원")
print(f"최저가: {min(종목가격):,}원")
print(f"평균가: {sum(종목가격)/len(종목가격):,.0f}원")

# %% [markdown] id="mupXE3y4UK0Y"
# ## 3. 딕셔너리 (Dictionary)
#
# 키(Key)와 값(Value)의 쌍으로 데이터를 저장
#
# ### 기본 사용법
# - `{ }` 중괄호로 생성
# - `{키: 값}` 형태
# - 종목 코드를 키로, 종목 정보를 값으로 저장하는 데 유용
#
# ### 주요 기능
# - **접근**: `딕셔너리[키]`
# - **추가/수정**: `딕셔너리[키] = 값`
# - **키 목록**: `딕셔너리.keys()`
# - **값 목록**: `딕셔너리.values()`
#

# %% colab={"base_uri": "https://localhost:8080/"} id="TmrfxN-_UK0Y" outputId="740c90de-c2a5-48ad-f8ff-102b4042b697"
# 종목 정보를 딕셔너리로 관리

종목정보 = {
    "005930": {"종목명": "삼성전자", "현재가": 75000, "시가총액": "450조"},
    "035420": {"종목명": "NAVER", "현재가": 450000, "시가총액": "90조"},
    "035720": {"종목명": "카카오", "현재가": 120000, "시가총액": "55조"}
}

print("[종목 정보 딕셔너리]")
for 코드, 정보 in 종목정보.items():
    print(f"\n종목코드: {코드}")
    print(f"  종목명: {정보['종목명']}")
    print(f"  현재가: {정보['현재가']:,}원")
    print(f"  시가총액: {정보['시가총액']}")

# 특정 종목 조회
print("\n" + "=" * 40)
print("[특정 종목 조회]")
조회코드 = "005930"
if 조회코드 in 종목정보:
    정보 = 종목정보[조회코드]
    print(f"{조회코드}: {정보['종목명']} - {정보['현재가']:,}원")
else:
    print(f"{조회코드} 종목을 찾을 수 없습니다.")

# %% [markdown] id="bgT-cQo_UK0a"
# ## 4. 조건문 (if, elif, else)
#
# 조건에 따라 다른 코드를 실행
#
# ### 비교 연산자
# - `==`: 같다 / `!=`: 다르다
# - `>`, `<`: 크다, 작다
# - `>=`, `<=`: 크거나 같다, 작거나 같다
#
# ### 논리 연산자
# - `and`: 그리고
# - `or`: 또는
# - `not`: 아니다
#

# %% colab={"base_uri": "https://localhost:8080/"} id="N4OKghNzUK0a" outputId="4f301b1e-c18d-48b9-f654-acbe471c7061"
# 주가 변동에 따른 매매 신호 판단

현재가 = 75000
전일가 = 73000
변동률 = ((현재가 - 전일가) / 전일가) * 100

print(f"현재가: {현재가:,}원")
print(f"전일가: {전일가:,}원")
print(f"변동률: {변동률:+.2f}%")

# 조건문으로 매매 신호 판단
if 변동률 > 5:
    신호 = "[상승] 강한 상승 - 매수 고려"
elif 변동률 > 0:
    신호 = "[중립] 약한 상승 - 관망"
elif 변동률 > -5:
    신호 = "[중립] 약한 하락 - 관망"
else:
    신호 = "[하락] 강한 하락 - 매도 고려"

print(f"\n매매 신호: {신호}")

# 여러 조건 조합
거래량 = 1000000
if 변동률 > 3 and 거래량 > 500000:
    print("\n[신호] 상승 추세 + 높은 거래량 → 강한 매수 신호")

# %% [markdown] id="otGRLSnbUK0a"
# ## 5. 반복문 (for)
#
# 리스트, 딕셔너리 등의 요소를 하나씩 처리
# - `for 변수 in 반복가능객체:` 형태
# - `break`: 반복문 종료
# - `continue`: 현재 반복 건너뛰기
#
# ### 금융 데이터에서의 활용
# - 여러 종목 데이터 처리
# - 일별 데이터 순회
# - 조건에 맞는 데이터 필터링
#

# %% colab={"base_uri": "https://localhost:8080/"} id="8fj96PKGUK0b" outputId="257f42c2-3dc3-49a3-aefb-b0080d9d13e8"
# 여러 종목의 수익률 계산

종목데이터 = [
    {"이름": "삼성전자", "매수가": 70000, "현재가": 75000},
    {"이름": "NAVER", "매수가": 400000, "현재가": 450000},
    {"이름": "카카오", "매수가": 130000, "현재가": 120000},
    {"이름": "LG전자", "매수가": 80000, "현재가": 85000}
]

print("[종목별 수익률 계산]")
print("=" * 50)

총수익 = 0
for 종목 in 종목데이터:
    이름 = 종목["이름"]
    매수가 = 종목["매수가"]
    현재가 = 종목["현재가"]
    수익률 = ((현재가 - 매수가) / 매수가) * 100
    수익금 = 현재가 - 매수가

    총수익 += 수익금

    상태 = "[+]" if 수익률 > 0 else "[-]"

    print(f"{상태} {이름}")
    print(f"   매수가: {매수가:,}원 → 현재가: {현재가:,}원")
    print(f"   수익률: {수익률:+.2f}%")
    print()

print("=" * 50)
print(f"총 수익금: {총수익:+,}원")

# %% colab={"base_uri": "https://localhost:8080/"} id="I8X_6EG2UK0b" outputId="5da91024-0c23-4e30-9de0-9d607a3bf117"
# 수익률이 높은 종목만 필터링

종목리스트 = [
    {"이름": "삼성전자", "수익률": 7.14},
    {"이름": "NAVER", "수익률": 12.50},
    {"이름": "카카오", "수익률": -7.69},
    {"이름": "LG전자", "수익률": 6.25},
    {"이름": "셀트리온", "수익률": 15.00}
]

print("[수익률 5% 이상 종목 필터링]")
print("=" * 50)

우수종목 = []
for 종목 in 종목리스트:
    if 종목["수익률"] >= 5:
        우수종목.append(종목)
        print(f"[O] {종목['이름']}: {종목['수익률']:+.2f}%")

print(f"\n우수 종목 수: {len(우수종목)}개")


# %% [markdown] id="ARCts9VHe5Tl"
# ## 6. 함수 (def)
#
# 반복되는 코드를 재사용 가능한 블록으로 정의
#
# ### 기본 문법
# ```python
# def 함수명(매개변수):
#     실행할 코드
#     return 반환값
# ```
#
# ### 함수의 장점
# - **코드 재사용**: 같은 코드를 여러 번 작성할 필요 없음
# - **유지보수 용이**: 한 곳만 수정하면 모든 곳에 적용
# - **가독성 향상**: 복잡한 로직을 의미 있는 이름으로 추상화
#
# ### 금융 데이터에서의 활용
# - 수익률 계산 함수
# - 이동평균 계산 함수
# - 매매 신호 판단 함수
#

# %% colab={"base_uri": "https://localhost:8080/"} id="vxLiTMPfe5Tm" outputId="193c7e91-609f-4f39-87ee-e85dd92bf92f"
# 금융 데이터 분석에 유용한 함수 정의

# 1. 수익률 계산 함수
def 수익률_계산(매수가, 현재가):
    """매수가와 현재가로 수익률을 계산합니다."""
    수익률 = ((현재가 - 매수가) / 매수가) * 100
    return 수익률

# 2. 매매 신호 판단 함수
def 매매신호_판단(변동률):
    """변동률에 따른 매매 신호를 반환합니다."""
    if 변동률 > 5:
        return "[상승] 강한 매수"
    elif 변동률 > 0:
        return "[중립] 관망 (약한 상승)"
    elif 변동률 > -5:
        return "[중립] 관망 (약한 하락)"
    else:
        return "[하락] 강한 매도"

# 3. 포트폴리오 평가 함수
def 포트폴리오_평가(종목리스트):
    """포트폴리오의 총 수익률과 수익금을 계산합니다."""
    총매수 = 0
    총평가 = 0

    for 종목 in 종목리스트:
        매수금액 = 종목["매수가"] * 종목["수량"]
        평가금액 = 종목["현재가"] * 종목["수량"]
        총매수 += 매수금액
        총평가 += 평가금액

    총수익률 = ((총평가 - 총매수) / 총매수) * 100
    총수익금 = 총평가 - 총매수

    return 총수익률, 총수익금

print("함수 정의 완료!")
print("정의된 함수: 수익률_계산(), 매매신호_판단(), 포트폴리오_평가()")

# %% colab={"base_uri": "https://localhost:8080/"} id="RydIanpje5Tm" outputId="edb156d2-6a64-41f5-baa7-0fc7111d2070"
# 함수 사용 예제

print("[함수 활용 예제]")
print("=" * 50)

# 수익률 계산 함수 사용
매수가격 = 70000
현재가격 = 75000
결과 = 수익률_계산(매수가격, 현재가격)
print(f"\n1. 수익률 계산")
print(f"   매수가: {매수가격:,}원 → 현재가: {현재가격:,}원")
print(f"   수익률: {결과:+.2f}%")

# 매매 신호 판단 함수 사용
print(f"\n2. 매매 신호 판단")
변동률_테스트 = [7.5, 2.3, -1.5, -8.2]
for 변동률 in 변동률_테스트:
    신호 = 매매신호_판단(변동률)
    print(f"   변동률 {변동률:+.1f}% → {신호}")

# 포트폴리오 평가 함수 사용
print(f"\n3. 포트폴리오 평가")
내_포트폴리오 = [
    {"종목명": "삼성전자", "매수가": 70000, "현재가": 75000, "수량": 10},
    {"종목명": "NAVER", "매수가": 400000, "현재가": 450000, "수량": 2},
    {"종목명": "카카오", "매수가": 130000, "현재가": 120000, "수량": 5}
]

총수익률, 총수익금 = 포트폴리오_평가(내_포트폴리오)
print(f"   총 수익률: {총수익률:+.2f}%")
print(f"   총 수익금: {총수익금:+,}원")

# %% [markdown] id="7CTM1-wzUK0b"
# ## 종합 실습: 포트폴리오 분석
#
# 배운 내용을 종합하여 실제 포트폴리오를 분석해봅니다.
#

# %% colab={"base_uri": "https://localhost:8080/"} id="XOFsDY4xUK0b" outputId="46f8a088-c3c5-47d2-ca12-eef7e0a8e214"
# 배운 내용을 종합한 포트폴리오 분석

print("=" * 60)
print("[포트폴리오 종합 분석]")
print("=" * 60)

포트폴리오 = [
    {"종목코드": "005930", "종목명": "삼성전자", "보유수량": 10, "매수가": 70000, "현재가": 75000},
    {"종목코드": "035420", "종목명": "NAVER", "보유수량": 2, "매수가": 400000, "현재가": 450000},
    {"종목코드": "035720", "종목명": "카카오", "보유수량": 5, "매수가": 130000, "현재가": 120000}
]

총평가금액 = 0
총매수금액 = 0

print("\n종목별 상세 정보:")
print("-" * 60)

for 종목 in 포트폴리오:
    매수금액 = 종목["매수가"] * 종목["보유수량"]
    평가금액 = 종목["현재가"] * 종목["보유수량"]
    수익금 = 평가금액 - 매수금액
    수익률 = (수익금 / 매수금액) * 100

    총매수금액 += 매수금액
    총평가금액 += 평가금액

    상태 = "[+]" if 수익률 > 0 else "[-]"

    print(f"{상태} {종목['종목명']} ({종목['종목코드']})")
    print(f"   보유: {종목['보유수량']}주")
    print(f"   수익률: {수익률:+.2f}%")
    print(f"   수익금: {수익금:+,}원")
    print()

전체수익률 = ((총평가금액 - 총매수금액) / 총매수금액) * 100
전체수익금 = 총평가금액 - 총매수금액

print("-" * 60)
print("[포트폴리오 요약]")
print(f"총 매수 금액: {총매수금액:,}원")
print(f"총 평가 금액: {총평가금액:,}원")
print(f"전체 수익률: {전체수익률:+.2f}%")
print(f"전체 수익금: {전체수익금:+,}원")
print("=" * 60)

# %% [markdown] id="6l_tpOWKUK0b"
# ## 배운 내용 정리
#
# - **변수와 자료형**: int, float, str, bool
#
# - **리스트**: 여러 데이터를 순서대로 저장
#
# - **딕셔너리**: 키-값 쌍으로 데이터 저장
#
# - **조건문**: if, elif, else로 조건에 따른 분기
#
# - **반복문**: for로 리스트/딕셔너리 순회
#
# - **함수**: def로 재사용 가능한 코드 블록 정의
#
# ---
#
# ## 다음 차시 예고
# 다음 차시에서는 **Pandas 라이브러리**를 사용하여
# 더 효율적으로 금융 데이터를 다루는 방법을 배웁니다!

# %% id="GUvUqtAQVIAL"
